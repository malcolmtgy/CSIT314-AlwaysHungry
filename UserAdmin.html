<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>C2C Cleaner Matching Platform</title>
        <link rel="stylesheet" href="stylesheet.css">
    </head>
    <body>
        <!-- Dashboard Section -->
        <div id="dashboard" class="hidden">
            <h2>Dashboard</h2>
            <div id="dashboardContent"></div>
            <button onclick="logout()">Logout</button>
        </div>
    
        <!-- User Admin Panel -->
        <div id="adminSection" class="section hidden">
            <h3>User Admin Functions</h3>
            <form onsubmit="saveUser(event)">
                <label>Username: <input type="text" id="registerUsername" required></label>
                <label>Email: <input type="email" id="registerEmail" required></label>
                <label>Password: <input type="password" id="registerPassword" required></label>
                <label>Role:
                    <select id="registerRole" onchange="toggleAddressField()" required>
                        <option value="userAdmin">User Admin</option>
                        <option value="cleaner">Cleaner</option>
                        <option value="homeowner">Home Owner</option>
                        <option value="platformManager">Platform Manager</option>
                    </select>
                </label>
                <div id="addressField" class="hidden">
                    <label>Address: <input type="text" id="registerAddress"></label>
                </div>
                <button type="submit">Create User</button>
            </form>
    
            <h4>Search Users</h4>
            <input type="text" id="searchUser" oninput="renderUserTable()" placeholder="Search by username or role">
    
            <h4>User List</h4>
            <table id="userTable">
                <thead>
                    <tr><th>Username</th><th>Role</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <script src="script.js"></script>
        <script>
            window.addEventListener("DOMContentLoaded", () => {
                const user = sessionStorage.getItem("currentUser");
                if (!user) {
                  alert("Not authenticated. Redirecting to login page.");
                  window.location.href = "index.html";
                }
            });            
        </script>          
    </body>
</html>